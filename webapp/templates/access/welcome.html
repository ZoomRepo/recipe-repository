{% extends "base.html" %}
{% block title %}Welcome Â· Recipe Library{% endblock %}
{% block body_class %}access-page{% endblock %}
{% block content %}
  <div class="access-hero">
    <div class="access-card">
      <h1>Welcome to the Recipe Library</h1>
      <p class="access-lede">
        We are currently in Alpha/Beta development stages, but we'd love to keep you in the loop.
      </p>
      {% if subscribe_status %}
        <div class="alert alert-{{ subscribe_status.category }}">{{ subscribe_status.message }}</div>
      {% endif %}
      <form method="post" class="access-form">
        <input type="hidden" name="action" value="subscribe">
        <label class="access-label" for="email">Stay updated with launch news</label>
        <div class="access-input-row">
          <input
            type="email"
            id="email"
            name="email"
            placeholder="you@example.com"
            required
            autocomplete="email"
          >
          <button type="submit" class="access-button primary">Notify Me</button>
        </div>
      </form>
      <hr class="access-divider">
      <h2>Have you been invited to test the Recipe Library?</h2>
      {% if invite_status %}
        <div class="alert alert-{{ invite_status.category }}">{{ invite_status.message }}</div>
      {% endif %}
      {% if code_requested %}
        <p class="access-subtle">
          Enter the 6 digit code we sent to {{ pending_phone or 'your mobile number' }}.
        </p>
        <form method="post" class="access-form">
          <input type="hidden" name="action" value="verify_code">
          <label class="access-label" for="code">6 digit access code</label>
          <div class="access-input-row">
            <input
              type="text"
              id="code"
              name="code"
              inputmode="numeric"
              pattern="\\d{6}"
              maxlength="6"
              minlength="6"
              placeholder="123456"
              required
              autocomplete="one-time-code"
            >
            <button type="submit" class="access-button primary">Unlock</button>
          </div>
        </form>
        <form method="post" class="access-form access-inline">
          <input type="hidden" name="action" value="request_code">
          <input type="hidden" name="phone" value="{{ pending_phone }}">
          <button type="submit" class="access-button link">Resend code</button>
        </form>
      {% else %}
        <p class="access-subtle">Enter your mobile number below to receive a verification code.</p>
        <form method="post" class="access-form">
          <input type="hidden" name="action" value="request_code">
          <label class="access-label" for="phone">Mobile number</label>
          <div class="access-input-row">
            <input
              type="tel"
              id="phone"
              name="phone"
              placeholder="+441234567890"
              required
              autocomplete="tel"
            >
            <button type="submit" class="access-button primary">Send Code</button>
          </div>
        </form>
      {% endif %}
    </div>
  </div>
{% endblock %}
